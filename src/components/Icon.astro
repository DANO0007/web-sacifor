---
// Importar estilos del componente
import "../styles/icon.css";
// Importar tipo HTMLAttributes para mejores prácticas
import type { HTMLAttributes } from "astro/types";

// Tipos de iconos disponibles
type IconName =
  | "leaf"
  | "globe"
  | "handshake"
  | "construction"
  | "book"
  | "phone"
  | "lupa"
  | "investigacion"
  | "planta"
  | "llaveagua"
  | "montana"
  | "asesoria"
  | "engrane"
  | "bosque"
  | "mapa"
  | "maestro"
  | "confiabilidad"
  | "efectividad"
  | "equidad"
  | "honestidad"
  | "inovacion"
  | "integracion"
  | "respeto"
  | "responsabilidad"
  | "equipo"
  | "experiencia"
  | "tramite"
  | "soluciones"
  | "email"
  | "mision"
  | "vision"
  | "captacion"
  | "fabrica"
  | "eolico"
  | "inventario"
  | "lluvia"
  | "geografico"
  | "educacion"
  | "calendario";

// Interface Props exportada con extensión de HTMLAttributes
export interface Props extends HTMLAttributes<"svg"> {
  /** Nombre del icono a mostrar */
  name: IconName;
  /** Tamaño del icono en píxeles */
  size?: number;
  /** Etiqueta de accesibilidad para el icono */
  "aria-label"?: string;
}

const {
  name,
  size = 24,
  class: className,
  "aria-label": ariaLabel,
  ...svgProps
} = Astro.props;

// Mapeo de nombres a componentes SVG con tipado estricto
const icons: Record<IconName, () => Promise<any>> = {
  leaf: () => import("../assets/icons/leaf.svg"),
  globe: () => import("../assets/icons/globe.svg"),
  handshake: () => import("../assets/icons/handshake.svg"),
  construction: () => import("../assets/icons/construction.svg"),
  book: () => import("../assets/icons/book.svg"),
  phone: () => import("../assets/icons/phone.svg"),
  lupa: () => import("../assets/icons/lupa.svg"),
  investigacion: () => import("../assets/icons/investigacion.svg"),
  planta: () => import("../assets/icons/planta.svg"),
  llaveagua: () => import("../assets/icons/llaveagua.svg"),
  montana: () => import("../assets/icons/montana.svg"),
  asesoria: () => import("../assets/icons/asesoria.svg"),
  engrane: () => import("../assets/icons/engrane.svg"),
  bosque: () => import("../assets/icons/bosque.svg"),
  mapa: () => import("../assets/icons/mapa.svg"),
  maestro: () => import("../assets/icons/maestro.svg"),
  confiabilidad: () => import("../assets/icons/confiabilidad.svg"),
  efectividad: () => import("../assets/icons/efectividad.svg"),
  equidad: () => import("../assets/icons/equidad.svg"),
  honestidad: () => import("../assets/icons/honestidad.svg"),
  inovacion: () => import("../assets/icons/inovacion.svg"),
  integracion: () => import("../assets/icons/integracion.svg"),
  respeto: () => import("../assets/icons/respeto.svg"),
  responsabilidad: () => import("../assets/icons/responsabilidad.svg"),
  equipo: () => import("../assets/icons/equipo.svg"),
  experiencia: () => import("../assets/icons/experiencia.svg"),
  tramite: () => import("../assets/icons/tramite.svg"),
  soluciones: () => import("../assets/icons/soluciones.svg"),
  email: () => import("../assets/icons/email.svg"),
  mision: () => import("../assets/icons/mision.svg"),
  vision: () => import("../assets/icons/vision.svg"),
  captacion: () => import("../assets/icons/captacion.svg"),
  fabrica: () => import("../assets/icons/fabrica.svg"),
  eolico: () => import("../assets/icons/eolico.svg"),
  inventario: () => import("../assets/icons/inventario.svg"),
  lluvia: () => import("../assets/icons/lluvia.svg"),
  geografico: () => import("../assets/icons/geografico.svg"),
  educacion: () => import("../assets/icons/educacion.svg"),
  calendario: () => import("../assets/icons/calendario.svg"),
} as const;

// Validación de icono con mejor error handling
const IconComponent = icons[name];
if (!IconComponent) {
  console.error(
    `Icon "${name}" not found. Available icons:`,
    Object.keys(icons)
  );
  throw new Error(`Icon "${name}" not found`);
}

const { default: SVGIcon } = await IconComponent();
---

<SVGIcon
  width={size}
  height={size}
  class={className}
  aria-label={ariaLabel}
  role={ariaLabel ? "img" : "presentation"}
  {...svgProps}
/>
